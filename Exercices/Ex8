-- RequÃªte 1: on vient ajouter une nouvelle table disponibilitÃ©s comme indiquÃ© dans l'Ã©noncÃ©.
CREATE TABLE Disponibilite (
    id_disponibilite VARCHAR(50) PRIMARY KEY,
    id_materiel VARCHAR(50) NOT NULL,
    date_debut DATE NOT NULL,
    date_fin DATE NOT NULL,
    FOREIGN KEY (id_materiel) REFERENCES Materiel(id_materiel)
);

-- RequÃªte2: On vient modifier la table Reservation pour y ajouter une nouvelle colonne id_disponibilitÃ© avec clÃ© Ã©trangÃ¨re rÃ©fÃ©renÃ§ant la table disponibilitÃ©
ALTER TABLE Reservation
ADD COLUMN id_disponibilite VARCHAR(50);

ALTER TABLE Reservation
ADD CONSTRAINT fk_disponibilite
FOREIGN KEY (id_disponibilite) REFERENCES Disponibilite(id_disponibilite);

-- RequÃªte 3: 


1. CrÃ©ation dâ€™exemples de base
ðŸ”¹ Ajout dâ€™un utilisateur et dâ€™un matÃ©riel
sql
Copier
Modifier
INSERT INTO Utilisateur (id_utilisateur, nom, prenom, email, promotion, filliere)
VALUES ('U100', 'Dupont', 'Marie', 'marie.dupont@example.com', '2025', 'Informatique');

INSERT INTO Materiel (id_materiel, nom, quantite_disponible, etat)
VALUES ('M100', 'CamÃ©ra HD', 5, 'bon');
ðŸ”¹ Ajout dâ€™une disponibilitÃ©
sql
Copier
Modifier
INSERT INTO Disponibilite (id_disponibilite, id_materiel, date_debut, date_fin)
VALUES ('D100', 'M100', '2025-06-01', '2025-06-10');
 Tentative de rÃ©servation valide
RÃ©server du 3 au 6 juin â†’ dans la pÃ©riode disponible :

sql
Copier
Modifier
INSERT INTO Reservation (
    id_reservation, date_debut, date_fin, statut, quantite_reservee,
    id_utilisateur, id_materiel, id_disponibilite
)
SELECT 
    'R100', '2025-06-03', '2025-06-06', 'validee', 1,
    'U100', 'M100', id_disponibilite
FROM Disponibilite
WHERE id_materiel = 'M100'
  AND '2025-06-03' >= date_debut
  AND '2025-06-06' <= date_fin;
Tentative de rÃ©servation invalide
RÃ©server du 12 au 14 juin â†’ hors pÃ©riode disponible. Rien ne sera insÃ©rÃ©, mais on peut tester avec CASE :

sql
Copier
Modifier
SELECT 
    CASE 
        WHEN '2025-06-12' >= date_debut AND '2025-06-14' <= date_fin
        THEN 'OK'
        ELSE 'KO'
    END AS statut_disponibilite
FROM Disponibilite
WHERE id_materiel = 'M100';
 VÃ©rifier ce qui a Ã©tÃ© rÃ©servÃ©
sql
Copier
Modifier
SELECT * FROM Reservation
WHERE id_materiel = 'M100';
